# โ ุฅุตูุงุญ: ุงูุตูุฑ ุชุฎุชูู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุฏุฎูู ูููุธุงู

## ๐ฏ ุงููุดููุฉ

- โ **ูุจู**: ุงูุตูุฑ ุชุฎุชูู ูุชุตุจุญ ุฑูุงุจุท ููุณูุฑุฉ ุจุนุฏ ุงูุฎุฑูุฌ ูุฅุนุงุฏุฉ ุงูุฏุฎูู ูููุธุงู
- โ **ุงูุณุจุจ**: ุงุณุชุฎุฏุงู `URL.createObjectURL()` ุงูุฐู ููุดุฆ ุฑูุงุจุท ูุคูุชุฉ ูู ุงูุฐุงูุฑุฉ
- โ **ุงููุชูุฌุฉ**: ููุฏุงู ุงูุตูุฑ ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ุฃู ุงูุฎุฑูุฌ ูุฅุนุงุฏุฉ ุงูุฏุฎูู

---

## ๐ ุฌุฐุฑ ุงููุดููุฉ

### ุงุณุชุฎุฏุงู URL.createObjectURL (โ ุฎุทุฃ)
```typescript
const handleFileChange = (e) => {
  const files = Array.from(e.target.files);
  const urls = files.map(file => URL.createObjectURL(file));
  // โ ูุฐู ุฑูุงุจุท ูุคูุชุฉ ุชุฎุชูู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญููู
  setImages(urls);
};
```

**ุงููุดุงูู:**
- `URL.createObjectURL()` ููุดุฆ ุฑุงุจุท blob ูุคูุช ูุซู: `blob:http://localhost:3000/abc123`
- ูุฐุง ุงูุฑุงุจุท ููุฌูุฏ ููุท ูู ุงูุฐุงูุฑุฉ
- ูุฎุชูู ุนูุฏ:
  - ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
  - ุงูุฎุฑูุฌ ูุฅุนุงุฏุฉ ุงูุฏุฎูู
  - ุฅุบูุงู ุงููุชุตูุญ
- ูุง ูุชู ุญูุธู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุฏุงุฆู

---

## โจ ุงูุญู ุงููุทุจู

### ุชุญููู ุงูุตูุฑ ุฅูู Base64 (โ ุตุญูุญ)
```typescript
const handleFileChange = async (e) => {
  const files = Array.from(e.target.files);
  
  // ุชุญููู ูู ุตูุฑุฉ ุฅูู base64
  const base64Promises = files.map(file => {
    return new Promise<string>((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result as string);
      reader.onerror = reject;
      reader.readAsDataURL(file); // โ ุชุญููู ูู base64
    });
  });
  
  try {
    const base64Images = await Promise.all(base64Promises);
    setImages(prev => [...prev, ...base64Images]);
  } catch (error) {
    console.error('Error converting images:', error);
    toast({
      variant: 'destructive',
      title: 'ุฎุทุฃ',
      description: 'ูุดู ุชุญููู ุงูุตูุฑ.',
    });
  }
};
```

**ุงูููุงุฆุฏ:**
- โ Base64 ุนุจุงุฑุฉ ุนู ูุต ููุญูุธ ุจุดูู ุฏุงุฆู
- โ ููุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุจููุฉ ุงูุจูุงูุงุช
- โ ูุง ูุฎุชูู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญููู
- โ ูุนูู ุนูู ุฌููุน ุงููุชุตูุญุงุช
- โ ูุง ูุญุชุงุฌ ุฎุงุฏู ูููุงุช ูููุตู

---

## ๐ ุงูููุงุฑูุฉ

### URL.createObjectURL (ุงููุดููุฉ)
```
1. ุงููุณุชุฎุฏู ูุฑูุน ุตูุฑุฉ
   โ
2. ูุชู ุฅูุดุงุก: blob:http://localhost/abc123
   โ
3. ููุญูุธ ุงูุฑุงุจุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
4. ุงููุณุชุฎุฏู ูุฎุฑุฌ ูู ุงููุธุงู
   โ
5. ูุนูุฏ ูููุธุงู
   โ
6. โ ุงูุฑุงุจุท ูู ูุนุฏ ููุฌูุฏุงู!
   โ
7. ุงูุตูุฑุฉ ููุณูุฑุฉ ๐ผ๏ธโ
```

### Base64 (ุงูุญู)
```
1. ุงููุณุชุฎุฏู ูุฑูุน ุตูุฑุฉ
   โ
2. ูุชู ุงูุชุญููู ุฅูู: data:image/jpeg;base64,/9j/4AAQ...
   โ
3. ููุญูุธ ุงููุต ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
4. ุงููุณุชุฎุฏู ูุฎุฑุฌ ูู ุงููุธุงู
   โ
5. ูุนูุฏ ูููุธุงู
   โ
6. โ ุงููุต ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
7. ุงูุตูุฑุฉ ุชุนูู ุจุดูู ูุซุงูู ๐ผ๏ธโ
```

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### 1. src/app/work-plan-report/page.tsx
```typescript
// ูุจู
const urls = files.map(file => URL.createObjectURL(file));

// ุจุนุฏ
const base64Promises = files.map(file => {
  return new Promise<string>((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result as string);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
});
const base64Images = await Promise.all(base64Promises);
```

### 2. src/app/mobile-upload/page.tsx
```typescript
// ููุณ ุงูุชุบููุฑ - ุชุญููู ุฅูู base64
```

---

## ๐จ ููู ูุนูู Base64

### ูุซุงู ุนูู Base64:
```
ุงูุตูุฑุฉ ุงูุฃุตููุฉ:
๐ผ๏ธ image.jpg (50KB)

ุจุนุฏ ุงูุชุญููู ูู Base64:
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDA...

ูุฐุง ุงููุต:
- ููุซู ุงูุตูุฑุฉ ุจุงููุงูู
- ูููู ุญูุธู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูููู ุงุณุชุฎุฏุงูู ูุจุงุดุฑุฉ ูู src
- ูุง ูุฎุชูู ุฃุจุฏุงู
```

### ุงุณุชุฎุฏุงู Base64 ูู HTML:
```html
<img src="data:image/jpeg;base64,/9j/4AAQ..." />
```

---

## ๐ ุงูุฃุฏุงุก

### ุงูุญุฌู:
- Base64 ุฃูุจุฑ ุจู 33% ูู ุงูุตูุฑุฉ ุงูุฃุตููุฉ
- ูุซุงู: ุตูุฑุฉ 100KB โ base64 133KB
- ููุจูู ููุตูุฑ ุงูุตุบูุฑุฉ ูุงููุชูุณุทุฉ

### ุงูุชูุตูุงุช:
1. **ููุตูุฑ ุงูุตุบูุฑุฉ** (<500KB): Base64 ููุชุงุฒ โ
2. **ููุตูุฑ ุงููุชูุณุทุฉ** (500KB-2MB): Base64 ููุจูู โ๏ธ
3. **ููุตูุฑ ุงููุจูุฑุฉ** (>2MB): ุงุณุชุฎุฏู ุฎุงุฏู ูููุงุช ๐ด

### ุชุญุณูู ุงูุฃุฏุงุก:
```typescript
// ุถุบุท ุงูุตูุฑ ูุจู ุงูุชุญููู
const compressImage = async (file: File): Promise<string> => {
  return new Promise((resolve) => {
    const reader = new FileReader();
    reader.onload = (e) => {
      const img = new Image();
      img.onload = () => {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d')!;
        
        // ุชูููู ุงูุญุฌู ุฅูู 800x600 ูุญุฏ ุฃูุตู
        const maxWidth = 800;
        const maxHeight = 600;
        let width = img.width;
        let height = img.height;
        
        if (width > maxWidth || height > maxHeight) {
          const ratio = Math.min(maxWidth / width, maxHeight / height);
          width *= ratio;
          height *= ratio;
        }
        
        canvas.width = width;
        canvas.height = height;
        ctx.drawImage(img, 0, 0, width, height);
        
        // ุถุบุท ุจุฌูุฏุฉ 0.7
        resolve(canvas.toDataURL('image/jpeg', 0.7));
      };
      img.src = e.target.result as string;
    };
    reader.readAsDataURL(file);
  });
};
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุฑูุน ุตูุฑุฉ ูุงุญุฏุฉ
```
1. โ ุงูุชุญ ุตูุญุฉ ุฑูุน ุงูุตูุฑ
2. โ ุงุฎุชุฑ ุตูุฑุฉ
3. โ ุชุธูุฑ ุงูุตูุฑุฉ ูู ุงููุนุงููุฉ
4. โ ุงุญูุธ
5. โ ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
6. โ ุงูุตูุฑุฉ ูุง ุชุฒุงู ููุฌูุฏุฉ
```

### ุงุฎุชุจุงุฑ 2: ุฑูุน ุตูุฑ ูุชุนุฏุฏุฉ
```
1. โ ุงุฎุชุฑ 3-5 ุตูุฑ
2. โ ุชุธูุฑ ุฌููุน ุงูุตูุฑ
3. โ ุงุญูุธ
4. โ ุฃุบูู ุงููุชุตูุญ
5. โ ุงูุชุญ ุงููุชุตูุญ ูุณุฌูู ุฏุฎูู
6. โ ุฌููุน ุงูุตูุฑ ููุฌูุฏุฉ
```

### ุงุฎุชุจุงุฑ 3: ุงูุฎุฑูุฌ ูุฅุนุงุฏุฉ ุงูุฏุฎูู
```
1. โ ุงุฑูุน ุตูุฑ
2. โ ุงุญูุธ
3. โ ุณุฌูู ุฎุฑูุฌ
4. โ ุณุฌูู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
5. โ ุงูุตูุฑ ููุฌูุฏุฉ ูุชุนูู
```

### ุงุฎุชุจุงุฑ 4: ุตูุฑ ูุจู ูุจุนุฏ
```
1. โ ุงุฑูุน ุตูุฑ "ูุจู ุงูุนูู"
2. โ ุงุฑูุน ุตูุฑ "ุจุนุฏ ุงูุนูู"
3. โ ุงุญูุธ
4. โ ุฃุนุฏ ุงูุชุญููู
5. โ ููุง ุงูููุนูู ููุฌูุฏ
```

---

## ๐ก ูุตุงุฆุญ ูููุณุชุฎุฏููู

### ููุญุตูู ุนูู ุฃูุถู ุฃุฏุงุก:
1. **ุงุณุชุฎุฏู ุตูุฑ ุจุญุฌู ูุนููู**: ุฃูู ูู 500KB ููู ุตูุฑุฉ
2. **ุถุบุท ุงูุตูุฑ ูุจู ุงูุฑูุน**: ุงุณุชุฎุฏู ุฃุฏูุงุช ูุซู TinyPNG
3. **ุชุฌูุจ ุงูุตูุฑ ุงูุถุฎูุฉ**: >2MB ูุฏ ุชุจุทุฆ ุงููุธุงู
4. **ุงุณุชุฎุฏู JPEG ุจุฏูุงู ูู PNG**: ููุตูุฑ ุงูููุชูุบุฑุงููุฉ

### ุฃุญุฌุงู ููุตู ุจูุง:
- ุตูุฑ ุงููุนุงููุฉ: 800x600 ุจูุณู
- ุฌูุฏุฉ JPEG: 70-80%
- ุญุฌู ููู: 100-500KB

---

## ๐ฎ ุชุญุณููุงุช ูุณุชูุจููุฉ

### 1. ุถุบุท ุชููุงุฆู ููุตูุฑ โ
```typescript
// ุถุบุท ุงูุตูุฑ ุฃุซูุงุก ุงูุฑูุน
const compressedImage = await compressImage(file);
```

### 2. ุฑูุน ุชุฏุฑูุฌู (Lazy Loading) ๐ก
```typescript
// ุชุญููู ุงูุตูุฑ ุนูุฏ ุงูุญุงุฌุฉ ููุท
<img loading="lazy" src={base64} />
```

### 3. ุฎุงุฏู ูููุงุช ูููุตู ๐๏ธ
```typescript
// ูููุดุงุฑูุน ุงููุจูุฑุฉ - ุฑูุน ูู S3 ุฃู Cloudinary
const url = await uploadToS3(file);
```

### 4. ูุนุงููุฉ ูุตุบุฑุฉ (Thumbnails) ๐ผ๏ธ
```typescript
// ุญูุธ ูุณุฎุฉ ูุตุบุฑุฉ + ูุณุฎุฉ ูุงููุฉ
const thumbnail = await createThumbnail(file);
const fullImage = await convertToBase64(file);
```

---

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ

### ุนูุฏ ุงุณุชุฎุฏุงู Base64:
1. **ุญุฏ ุงูุญุฌู**: SQL Server ูุฏูู ุญุฏ ุฃูุตู ูุญูู NVarChar(Max) = 2GB
2. **ุงูุฃุฏุงุก**: ูุฏ ุชุชุฃุซุฑ ุงูุณุฑุนุฉ ูุน ุตูุฑ ูุจูุฑุฉ ุฌุฏุงู
3. **ุงูุฐุงูุฑุฉ**: ูู ุตูุฑุฉ ุชูุญููู ูู ุงูุฐุงูุฑุฉ ุฃุซูุงุก ุงูุชุญููู
4. **ุงููุชุตูุญ**: ุจุนุถ ุงููุชุตูุญุงุช ุชุญุฏ ูู ุญุฌู FileReader

### ุงูุญููู ุงูุจุฏููุฉ:
- **ููุชุทุจููุงุช ุงููุจูุฑุฉ**: ุงุณุชุฎุฏู Azure Blob Storage ุฃู AWS S3
- **ููุตูุฑ ุงููุซูุฑุฉ**: ุฎุงุฏู ูููุงุช ูููุตู
- **ููุฃุฏุงุก ุงูุนุงูู**: CDN ูุชูุฒูุน ุงูุตูุฑ

---

## โ ุงููุชูุฌุฉ

**ุงููุดููุฉ ูุญูููุฉ ุจุงููุงูู!**

ุงูุขู:
- โ ุงูุตูุฑ ุชูุญูุธ ุจุดูู ุฏุงุฆู
- โ ูุง ุชุฎุชูู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุญููู
- โ ุชุนูู ุจุนุฏ ุงูุฎุฑูุฌ ูุฅุนุงุฏุฉ ุงูุฏุฎูู
- โ ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Base64
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ
- โ toast notifications ูููุณุชุฎุฏู

**ุงููุธุงู ุฌุงูุฒ ูููุซูู!** ๐

---

## ๐ ูุฑุงุฌุน

### Base64:
- [MDN - FileReader API](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)
- [MDN - Data URLs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs)

### URL.createObjectURL:
- [MDN - URL.createObjectURL](https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL)
- ููุงุฐุง ูุง ูุณุชุฎุฏูู ููุชุฎุฒูู ุงูุฏุงุฆู

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 8 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 1.5.0  
**ุงูุญุงูุฉ**: โ ูุฎุชุจุฑ ูุฌุงูุฒ
**ุงูุฃููููุฉ**: ๐ด ุญุฑุฌุฉ - ูุดููุฉ ููุฏุงู ุจูุงูุงุช

