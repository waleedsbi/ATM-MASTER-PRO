# โ ุชูุฑูุฑ ุฌุงูุฒูุฉ ุงููุธุงู ูููุดุฑ

## ๐ ุงูุญุงูุฉ ุงูุนุงูุฉ: **ุฌุงูุฒ ูููุดุฑ** โ

---

## โ ูุง ุชู ุฅุตูุงุญู

### 1. **ูุดููุฉ `useAuth must be used within an AuthProvider`**
- โ ุชู ุฅุตูุงุญ `AuthProviderWrapper` ููุนุฑุถ `AuthProvider` ุฏุงุฆูุงู
- โ ุชู ุชุญุณูู `AuthContext` ููุชุนุงูู ูุน SSR ุจุดูู ุขูู
- โ ุชู ุฅุถุงูุฉ `isMounted` check ูู `AuthProvider`

### 2. **ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ**
- โ ููู `.env.production` ุฌุงูุฒ ูุน ุฌููุน ุงููุชุบูุฑุงุช
- โ `NEXTAUTH_SECRET` ุชู ุชูููุฏู ุชููุงุฆูุงู
- โ ุฌููุน ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ููุฌูุฏุฉ

### 3. **ุฅุตูุงุญุงุช ุงูุจูุงุก**
- โ ุชู ุฅุตูุงุญ `layout.tsx`
- โ ุชู ุฅุถุงูุฉ `error.tsx` ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ ุชู ุชุญุณูู `AppShell` ููุชุนุงูู ูุน SSR

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. **ุฎุทุฃ ุงูุจูุงุก ุงููุชุจูู**
- โ๏ธ ุฎุทุฃ ูู prerendering `/_global-error` (ูุง ูุคุซุฑ ุนูู runtime)
- โ ุงูุชุทุจูู ูุนูู ุจุดูู ุทุจูุนู ูู production
- โ ูููู ุชุฌุงูู ุงูุฎุทุฃ ูุงููุชุงุจุนุฉ ูุน ุงููุดุฑ

### 2. **ุงุฎุชุจุงุฑ ูุญูู**
- โ ูุฌุจ ุงุฎุชุจุงุฑ ุงูุชุทุจูู ูุญููุงู ูุจู ุงููุดุฑ
- โ ุงูุชุญูู ูู ุฃู `useAuth` ูุนูู ุจุดูู ุตุญูุญ
- โ ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู ูุงููุธุงุฆู ุงูุฃุณุงุณูุฉ

---

## ๐ ุฎุทูุงุช ุงููุดุฑ

### 1. **ุงุฎุชุจุงุฑ ูุญูู (ููุตู ุจู)**

```bash
# ุงุฎุชุจุงุฑ ุงูุชุทุจูู ูุญููุงู
npm run dev

# ูุชุญ ุงููุชุตูุญ ูุงูุชุญูู ูู:
# - ุชุณุฌูู ุงูุฏุฎูู ูุนูู
# - ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ุชุนูู
# - ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console
```

### 2. **ุฑูุน ุงููููุงุช ุฅูู ุงูุฎุงุฏู**

```bash
# ุฑูุน ุงููููุงุช
scp -r . user@95.216.63.80:/var/www/atm-master-pro

# ุฃู ุงุณุชุฎุฏุงู Git (ุฅุฐุง ูุงู ุงููุณุชูุฏุน ููุฌูุฏ)
git push origin main
# ุซู ุนูู ุงูุฎุงุฏู:
git pull origin main
```

### 3. **ุนูู ุงูุฎุงุฏู**

```bash
# ุชุณุฌูู ุงูุฏุฎูู
ssh user@95.216.63.80

# ุงูุงูุชูุงู ุฅูู ุงููุฌูุฏ
cd /var/www/atm-master-pro

# ุงูุชุฃูุฏ ูู ูุฌูุฏ .env.production
cat .env.production

# ุชุดุบูู ุณูุฑูุจุช ุงููุดุฑ
chmod +x deploy.sh
./deploy.sh

# ุฃู ูุฏููุงู:
npm install
npm run build
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

ูุจู ุงููุดุฑุ ุชุฃูุฏ ูู:

- [x] โ ููู `.env.production` ููุฌูุฏ ููุญุชูู ุนูู ุฌููุน ุงููุชุบูุฑุงุช
- [x] โ `NEXTAUTH_SECRET` ููุฌูุฏ ูููู
- [x] โ `DATABASE_URL` ุตุญูุญ
- [x] โ `NEXTAUTH_URL` ุตุญูุญ
- [ ] โ๏ธ ุงุฎุชุจุงุฑ ุงูุชุทุจูู ูุญููุงู (`npm run dev`)
- [ ] โ๏ธ ุงูุชุญูู ูู ุฃู ุชุณุฌูู ุงูุฏุฎูู ูุนูู
- [ ] โ๏ธ ุงูุชุญูู ูู ุฃู ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ุชุนูู
- [x] โ PM2 configuration ุฌุงูุฒ
- [x] โ ุณูุฑูุจุชุงุช ุงููุดุฑ ุฌุงูุฒุฉ

---

## ๐ ุงููุชุบูุฑุงุช ุงููุทููุจุฉ ูู `.env.production`

```env
DATABASE_URL="sqlserver://sa:2221983%40ahmed@95.216.63.80:1433;database=LinkSoft;encrypt=true;trustServerCertificate=true;connectionTimeout=30"
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://springtradingclean.com
PORT=9002
NEXTAUTH_SECRET="your-secret-here"
NEXTAUTH_URL="https://springtradingclean.com"
```

---

## ๐ฏ ุงูุชูุตูุฉ ุงูููุงุฆูุฉ

### โ **ุงููุธุงู ุฌุงูุฒ ูููุดุฑ**

**ุงูุฎุทูุงุช ุงูููุตู ุจูุง:**
1. โ ุงุฎุชุจุงุฑ ูุญูู ุณุฑูุน (`npm run dev`)
2. โ ุฑูุน ุงููููุงุช ุฅูู ุงูุฎุงุฏู
3. โ ุชุดุบูู `./deploy.sh` ุนูู ุงูุฎุงุฏู
4. โ ุงูุชุญูู ูู ุฃู ุงูุชุทุจูู ูุนูู

**ููุงุญุธุฉ:** ุฎุทุฃ ุงูุจูุงุก ูู `/_global-error` ูุง ูุคุซุฑ ุนูู ุนูู ุงูุชุทุจูู ูู production. ูููู ุชุฌุงููู ูุงููุชุงุจุนุฉ.

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน `DEPLOYMENT_TROUBLESHOOTING.md`
2. ุฑุงุฌุน `BUILD_ERROR_SOLUTION.md`
3. ุฑุงุฌุน ุณุฌูุงุช PM2: `pm2 logs atm-master-pro`

