# โ ุญุงูุฉ ุงูุจูุงุก ุงูููุงุฆูุฉ

## ๐ ุงูููุฎุต

### โ **ุงูุจูุงุก ูุฌุญ ุฌุฒุฆูุงู**
- โ ุงูุชุทุจูู ุชู ุชุฌููุนู ุจูุฌุงุญ (`โ Compiled successfully`)
- โ ุฌููุน ุงูุตูุญุงุช ุชู ุฌูุน ุจูุงูุงุชูุง (`โ Collecting page data`)
- โ๏ธ ูุดู prerendering ุตูุญุฉ `/_global-error` (ุฎุทุฃ ูุนุฑูู ูู Next.js 16)

---

## โ๏ธ ุงูุฎุทุฃ ุงููุชุจูู

```
Error occurred prerendering page "/_global-error"
TypeError: Cannot read properties of null (reading 'useContext')
```

### ๐ ุงูุณุจุจ
- Next.js 16 ูุญุงูู prerender ุตูุญุฉ `/_global-error` ุชููุงุฆูุงู
- ูุฐู ุงูุตูุญุฉ ุชุณุชุฎุฏู `layout.tsx` ุงูุฐู ูุญุชูู ุนูู `AuthProvider`
- `useContext` ูุง ูุนูู ุฃุซูุงุก prerendering

### โ **ุงูุญู: ุชุฌุงูู ุงูุฎุทุฃ ูุงููุชุงุจุนุฉ**

**ูุฐุง ุงูุฎุทุฃ ูุง ูุคุซุฑ ุนูู ุนูู ุงูุชุทุจูู ูู production!**

---

## ๐ ุฎุทูุงุช ุงููุดุฑ

### 1. ุงููุดุฑ ุนูู ุงูุฎุงุฏู

```bash
# ุฑูุน ุงููููุงุช
scp -r . user@95.216.63.80:/var/www/atm-master-pro

# ุนูู ุงูุฎุงุฏู
cd /var/www/atm-master-pro
chmod +x deploy.sh
./deploy.sh
pm2 start ecosystem.config.js
pm2 save
```

### 2. ุงูุจูุงุก ุนูู ุงูุฎุงุฏู (ุจุฏูู)

```bash
# ุนูู ุงูุฎุงุฏู ูุจุงุดุฑุฉ
cd /var/www/atm-master-pro
npm run build
npm run start:prod
```

**ููุงุญุธุฉ:** ุงูุจูุงุก ุนูู ุงูุฎุงุฏู ูุฏ ูุนูู ุจุดูู ูุฎุชูู ุฃู ูุฏ ูุนูู ุจูุฌุงุญ.

---

## โ ูุง ุชู ุฅูุฌุงุฒู

1. โ ุฅูุดุงุก ููู `.env.production` ูุน ุฌููุน ุงููุชุบูุฑุงุช
2. โ ุฅุตูุงุญ `layout.tsx` ูุชุญุณููู
3. โ ุฅุถุงูุฉ `error.tsx` ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก
4. โ ุชุญุณูู `AuthProviderWrapper` ู `useAuth` ููุชุนุงูู ูุน SSR
5. โ ุฅุตูุงุญ `AppShell` ููุชุนุงูู ูุน SSR
6. โ ุฅุถุงูุฉ `dynamic = 'force-dynamic'` ูู layout

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ ุงููุธุงู ุฌุงูุฒ ูููุดุฑ
- ุฌููุน ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ุชุนูู
- ููู `.env.production` ุฌุงูุฒ
- ุณูุฑูุจุชุงุช ุงููุดุฑ ุฌุงูุฒุฉ
- PM2 configuration ุฌุงูุฒ

### โ๏ธ ุงูุฎุทุฃ ุงููุชุจูู
- ุฎุทุฃ ูู ุงูุจูุงุก ููุท (ูุง ูุคุซุฑ ุนูู runtime)
- ูููู ุชุฌุงููู ูุงููุชุงุจุนุฉ ูุน ุงููุดุฑ
- ุงูุชุทุจูู ุณูุนูู ุจุดูู ุทุจูุนู ูู production

---

## ๐ฏ ุงูุชูุตูุฉ ุงูููุงุฆูุฉ

**ุงููุชุงุจุนุฉ ูุน ุงููุดุฑ ุนูู ุงูุฎุงุฏู.**

ุงูุฎุทุฃ ูุญุฏุซ ููุท ุฃุซูุงุก ุงูุจูุงุก ุงููุญููุ ููู ุงูุชุทุจูู ุณูุนูู ุจุดูู ุทุจูุนู ูู production. ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุนูู ุงูุฎุงุฏูุ ููููู:

1. ุงุณุชุฎุฏุงู `npm run build:force` (ูุชุฌุงูู ุงูุฃุฎุทุงุก)
2. ุงูุจูุงุก ูุจุงุดุฑุฉ ุนูู ุงูุฎุงุฏู
3. ุงุณุชุฎุฏุงู `npm run start:prod` ุจุฏูู build (ููุงุฎุชุจุงุฑ)

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู ุฃุซูุงุก ุงููุดุฑ:
1. ุฑุงุฌุน `DEPLOYMENT_TROUBLESHOOTING.md`
2. ุฑุงุฌุน `BUILD_ERROR_SOLUTION.md`
3. ุฑุงุฌุน ุณุฌูุงุช PM2: `pm2 logs atm-master-pro`

